# Whatsgood/nexus Docker Image

This package provides a Docker image for running a Whatsgood/nexus server. See [docker-compose.yml](https://github.com/whats-good/nexus/blob/main/docker-compose.yml) for an example of how to use this image.

## Environment Variables

Below is a table of environment variables that can be set to configure the Nexus server.

| Name           | Description                                                                                                                                                                                                                                                                                                    | Default                                                                                                                 | Required | Example                                                                                                                |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------- |
| CHAINS         | A JSON array of chains. Each chain should have a `name`, `chainId`, and `blockTime`.                                                                                                                                                                                                                           | See [default chains](https://github.com/whats-good/nexus/blob/main/packages/nexus/src/default-chains/default-chains.ts) | No       | `[{"name": "eth_mainnet", "chainId": 1, "blockTime": 12}, [{"name": "base_mainnet", "chainId": 8453, "blockTime": 2}]` |
| NODE_PROVIDERS | A JSON array of node providers. Each provider should have a `name`, `url`, and `chainId`. Each `chainId` should refer to either a [default chains](https://github.com/whats-good/nexus/blob/main/packages/nexus/src/default-chains/default-chains.ts) or a `chainId` set in the `CHAINS` environment variable. | -                                                                                                                       | Yes      | `[{"name": "eth.public", "url":"https://eth.public-rpc.com", "chainId": 1}]`                                           |
| PORT           | The port the Nexus server should listen on.                                                                                                                                                                                                                                                                    | 4000                                                                                                                    | No       | 4000                                                                                                                   |
| AUTH_KEY       | The secret key used to authenticate requests to the Nexus server.                                                                                                                                                                                                                                              | -                                                                                                                       | No       | my-secret-key                                                                                                          |
| RELAY_ORDER    | The order in which to cycle through node providers when a request fails. Can be either `random` or `sequential`.                                                                                                                                                                                               | sequential                                                                                                              | No       | random                                                                                                                 |
| RELAY_FAILURE  | A string or a JSON array that configures error recovery. Can be set to `fail-immediately` or `["cycle-requests", <max number of retries>]`                                                                                                                                                                     | `["cycle-requests", 3]`                                                                                                 | No       | `["cycle-requests", 5]`                                                                                                |
